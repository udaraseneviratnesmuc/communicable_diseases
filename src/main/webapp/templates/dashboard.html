<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Dashboard</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="/communicable-disease/css/bootstrap.min.css">
<link rel="stylesheet" href="/communicable-disease/css/jquery-ui.css">
<link rel="stylesheet" href="/communicable-disease/css/custom.css">
<script src="/communicable-disease/js/jquery-3.1.1.min.js"></script>
<script src="/communicable-disease/js/jquery-ui.js"></script>
<script src="/communicable-disease/js/bootstrap.min.js"></script>
<script src="/communicable-disease/js/form544-custom.js"></script>
<script src="/communicable-disease/js/Chart.min.js"></script>

</head>

<body>
	<div id="banner"></div>

	<div id="navigation"></div>

	<div class="container">
		<canvas id="diseaseVsCount"></canvas>
	</div>

	<div id="footer"></div>


</body>


<!-- TODO
Header, Footer, menu should be included.
Frontend validations should be included.
Try to make common the imports.
Style the content with spacing and margins

 -->

<script th:inline="javascript">
	/*<![CDATA[*/
    var diseaseCounts = [[${diseaseCounts}]]; 
	 /*]]>*/
	 
	 var diseaseCountChartData = {
			labels: composeLblArray(diseaseCounts),
	 		datasets: [
	 		           		{
								data: composeDiseaseCounts(diseaseCounts),
								label: "Communicable Diseases",
								backgroundColor: "rgba(75,192,192,0.4)"
	 		           		}
	 		           ]
	 };
	 
	 function composeLblArray(diseaseCountsArr){
		 var diseaseLblArr = new Array();
		 
		 for(var count =0; count<diseaseCountsArr.length; count++){
			 diseaseLblArr[count] = diseaseCountsArr[count][0];
		 }
		 
		 return diseaseLblArr;
	 }
	 
	 function composeDiseaseCounts(diseaseCountsArr){
		 var counts = new Array();
		 
		 for(var count =0; count<diseaseCountsArr.length; count++){
			 counts[count] = diseaseCountsArr[count][1];
		 }
		 
		 return counts;
	 }
	 
     window.onload = function() {
    	 var currentDate = new Date();
    	 
         var ctx = document.getElementById("diseaseVsCount").getContext("2d");
         window.myBar = new Chart(ctx, {
             type: 'bar',
             data: diseaseCountChartData,
             options: {
                 responsive: true,
                 legend: {
                     position: 'top',
                 },
                 title: {
                     display: true,
                     text: currentDate.getFullYear() + ' Communicable Disease Trend'
                 }
             }
         });

     };
	 
 </script>